<div class="md:hidden" x-data="{ open: false }">
    <button @click="open = !open" class="text-white focus:outline-none bg-food-black bg-opacity-20 p-2 rounded-md">
        <i class="fas fa-bars text-xl"></i>
    </button>
    <div x-show="open"
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         @click.away="open = false"
         class="absolute top-16 right-4 bg-food-black rounded-lg shadow-lg py-4 px-6 w-56 border border-food-gold z-50">
        <a href="/" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-home mr-3 text-food-gold"></i> Home
        </a>
        <a href="{% url 'menu' %}" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-utensils mr-3 text-food-gold"></i> Menu
        </a>
        <a href="/#reservations" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="far fa-calendar-alt mr-3 text-food-gold"></i> Reservations
        </a>
        <a href="/#about" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-info-circle mr-3 text-food-gold"></i> About Us
        </a>
        <a href="/#contact" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-envelope mr-3 text-food-gold"></i> Contact
        </a>
        <div class="border-t border-gray-700 my-2"></div>

        {% if user.is_authenticated %}
        <div class="py-2 text-white">
            <div class="flex items-center mb-2">
                <i class="fas fa-user-circle mr-3 text-food-gold"></i>
                <span>
                    {% if user.first_name %}
                        {{ user.first_name }}
                    {% else %}
                        {{ user.username }}
                    {% endif %}
                </span>
            </div>
            {% if user.is_staff %}
                {% if user.is_superuser or user.staff_profile.role == 'ADMIN' %}
                <a href="{% url 'admin_dashboard' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-tachometer-alt mr-2"></i> Admin Dashboard
                </a>
                {% elif user.staff_profile.role == 'MANAGER' %}
                <a href="{% url 'manager_dashboard' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-tachometer-alt mr-2"></i> Manager Dashboard
                </a>
                {% elif user.staff_profile.role == 'CASHIER' %}
                <a href="{% url 'cashier_dashboard' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-cash-register mr-2"></i> Cashier Dashboard
                </a>
                {% endif %}
            {% else %}
                <a href="{% url 'customer_dashboard' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-tachometer-alt mr-2"></i> My Dashboard
                </a>
            {% endif %}
            <a href="{% url 'profile' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                <i class="fas fa-user mr-2"></i> My Profile
            </a>
            <a href="{% url 'my_orders' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                <i class="fas fa-history mr-2"></i> Order History
            </a>
            <a href="{% url 'logout' %}" class="flex items-center py-1 pl-6 text-sm text-gray-300 hover:text-food-gold transition duration-300">
                <i class="fas fa-sign-out-alt mr-2"></i> Logout
            </a>
        </div>
        {% else %}
        <a href="{% url 'login' %}" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-sign-in-alt mr-3 text-food-gold"></i> Login
        </a>
        <a href="{% url 'register' %}" class="flex items-center py-2 text-white hover:text-food-gold transition duration-300">
            <i class="fas fa-user-plus mr-3 text-food-gold"></i> Register
        </a>
        {% endif %}

        <div class="border-t border-gray-700 my-2"></div>
        <a href="{% url 'view_cart' %}" class="flex items-center justify-center py-2 mt-2 bg-gradient-to-r from-food-gold to-food-orange text-white font-bold rounded-md hover:from-food-red hover:to-food-gold transition duration-300 relative">
            <i class="fas fa-shopping-cart mr-2"></i> Cart
            <span id="mobile-cart-count" class="absolute -top-2 -right-2 bg-food-gold text-food-black text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full">{{ cart_count }}</span>
        </a>
    </div>
</div>
