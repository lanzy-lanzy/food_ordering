{% load custom_filters %}
<!-- Menu Items Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {% for item in menu_items %}
    <div class="bg-gradient-to-br from-gray-900 to-black rounded-xl overflow-hidden shadow-xl hover-scale transition-all duration-300 border border-gray-800 hover:border-food-gold">
        <div class="h-64 overflow-hidden relative">
            {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.name }}" class="w-full h-full object-cover">
            {% else %}
            <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c" alt="Food" class="w-full h-full object-cover">
            {% endif %}
            {% if item.is_featured %}
            <div class="absolute top-4 right-4 bg-food-gold text-food-black text-xs font-bold px-3 py-1 rounded-full">
                Featured
            </div>
            {% endif %}
            {% if item.is_vegetarian %}
            <div class="absolute top-4 left-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full">
                Vegetarian
            </div>
            {% endif %}
        </div>
        <div class="p-6">
            <div class="flex justify-between items-start mb-2">
                <h3 class="text-xl font-bold text-white">{{ item.name }}</h3>
                <span class="text-food-gold font-bold">{{ item.price|currency }}</span>
            </div>
            <p class="text-gray-400 mb-4 text-sm">{{ item.description|truncatechars:100 }}</p>

            {% if item.spice_level > 0 %}
            <div class="flex items-center mb-4">
                <span class="text-sm text-gray-400 mr-2">Spice Level:</span>
                <div class="flex">
                    {% for i in "12345" %}
                        {% if forloop.counter <= item.spice_level %}
                        <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                        {% else %}
                        <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <div class="flex justify-between items-center">
                <button hx-post="{% url 'add_to_cart' item.id %}"
                        hx-target="#cart-count"
                        hx-swap="innerHTML"
                        hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                        class="bg-food-gold text-food-black hover:bg-food-red hover:text-white font-bold py-2 px-4 rounded-full transition duration-300 text-sm flex items-center">
                    <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                </button>
                <div class="text-gray-400 text-sm">
                    <i class="fas fa-star text-food-gold"></i>
                    {% if item.reviews.count > 0 %}
                        {{ item.reviews.all|dictsort:"rating"|last }}
                    {% else %}
                        5.0
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <!-- Sample Menu Items (shown when no database items exist) -->
    <div class="bg-gradient-to-br from-gray-900 to-black rounded-xl overflow-hidden shadow-xl hover-scale transition-all duration-300 border border-gray-800 hover:border-food-gold">
        <div class="h-64 overflow-hidden relative">
            <img src="https://images.unsplash.com/photo-1544025162-d76694265947" alt="Ribeye Steak" class="w-full h-full object-cover">
            <div class="absolute top-4 right-4 bg-food-gold text-food-black text-xs font-bold px-3 py-1 rounded-full">
                Featured
            </div>
        </div>
        <div class="p-6">
            <div class="flex justify-between items-start mb-2">
                <h3 class="text-xl font-bold text-white">Ribeye Steak</h3>
                <span class="text-food-gold font-bold">₱32.99</span>
            </div>
            <p class="text-gray-400 mb-4 text-sm">Prime cut ribeye steak grilled to perfection, served with roasted vegetables and garlic mashed potatoes.</p>

            <div class="flex items-center mb-4">
                <span class="text-sm text-gray-400 mr-2">Spice Level:</span>
                <div class="flex">
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                </div>
            </div>

            <div class="flex justify-between items-center">
                <button class="bg-food-gold text-food-black hover:bg-food-red hover:text-white font-bold py-2 px-4 rounded-full transition duration-300 text-sm flex items-center">
                    <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                </button>
                <div class="text-gray-400 text-sm">
                    <i class="fas fa-star text-food-gold"></i> 4.9
                </div>
            </div>
        </div>
    </div>

    <div class="bg-gradient-to-br from-gray-900 to-black rounded-xl overflow-hidden shadow-xl hover-scale transition-all duration-300 border border-gray-800 hover:border-food-gold">
        <div class="h-64 overflow-hidden relative">
            <img src="https://images.unsplash.com/photo-1551504734-5ee1c4a1479b" alt="Pasta" class="w-full h-full object-cover">
        </div>
        <div class="p-6">
            <div class="flex justify-between items-start mb-2">
                <h3 class="text-xl font-bold text-white">Seafood Pasta</h3>
                <span class="text-food-gold font-bold">₱24.99</span>
            </div>
            <p class="text-gray-400 mb-4 text-sm">Fresh linguine pasta with shrimp, mussels, and calamari in a rich tomato sauce with a hint of white wine.</p>

            <div class="flex items-center mb-4">
                <span class="text-sm text-gray-400 mr-2">Spice Level:</span>
                <div class="flex">
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                </div>
            </div>

            <div class="flex justify-between items-center">
                <button class="bg-food-gold text-food-black hover:bg-food-red hover:text-white font-bold py-2 px-4 rounded-full transition duration-300 text-sm flex items-center">
                    <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                </button>
                <div class="text-gray-400 text-sm">
                    <i class="fas fa-star text-food-gold"></i> 4.7
                </div>
            </div>
        </div>
    </div>

    <div class="bg-gradient-to-br from-gray-900 to-black rounded-xl overflow-hidden shadow-xl hover-scale transition-all duration-300 border border-gray-800 hover:border-food-gold">
        <div class="h-64 overflow-hidden relative">
            <img src="https://images.unsplash.com/photo-1623855244183-52fd8d3ce2f7" alt="Salad" class="w-full h-full object-cover">
            <div class="absolute top-4 left-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full">
                Vegetarian
            </div>
        </div>
        <div class="p-6">
            <div class="flex justify-between items-start mb-2">
                <h3 class="text-xl font-bold text-white">Mediterranean Salad</h3>
                <span class="text-food-gold font-bold">₱14.99</span>
            </div>
            <p class="text-gray-400 mb-4 text-sm">Fresh mixed greens with feta cheese, kalamata olives, cherry tomatoes, cucumber, and red onion with balsamic vinaigrette.</p>

            <div class="flex items-center mb-4">
                <span class="text-sm text-gray-400 mr-2">Spice Level:</span>
                <div class="flex">
                    <i class="fas fa-pepper-hot text-food-red mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                    <i class="fas fa-pepper-hot text-gray-600 mx-0.5"></i>
                </div>
            </div>

            <div class="flex justify-between items-center">
                <button class="bg-food-gold text-food-black hover:bg-food-red hover:text-white font-bold py-2 px-4 rounded-full transition duration-300 text-sm flex items-center">
                    <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                </button>
                <div class="text-gray-400 text-sm">
                    <i class="fas fa-star text-food-gold"></i> 4.5
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
