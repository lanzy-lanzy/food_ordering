{% extends 'accounts/dashboard_base.html' %}

{% block title %}Settings - 5th Avenue Grill and Restobar{% endblock title %}

{% block page_title %}Account Settings{% endblock page_title %}
{% block page_subtitle %}Manage your account security and preferences{% endblock page_subtitle %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Security Settings -->
    <div class="lg:col-span-2">
        <div class="card p-6 shadow-lg border border-gray-800 mb-8">
            <h2 class="text-xl font-bold text-white mb-6">Change Password</h2>
            
            <form method="post" action="{% url 'user_settings' %}">
                {% csrf_token %}
                <div class="mb-6">
                    <label for="old_password" class="block text-white font-medium mb-2">Current Password</label>
                    <input type="password" id="old_password" name="old_password" required
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-food-gold">
                </div>
                
                <div class="mb-6">
                    <label for="new_password" class="block text-white font-medium mb-2">New Password</label>
                    <input type="password" id="new_password" name="new_password" required
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-food-gold">
                    <p class="text-gray-500 text-sm mt-1">Password must be at least 8 characters long</p>
                </div>
                
                <div class="mb-6">
                    <label for="confirm_password" class="block text-white font-medium mb-2">Confirm New Password</label>
                    <input type="password" id="confirm_password" name="confirm_password" required
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-food-gold">
                </div>
                
                <div class="flex justify-end">
                    <button type="submit" class="btn-primary px-6 py-3 rounded-lg">
                        Update Password
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Notification Settings -->
        <div class="card p-6 shadow-lg border border-gray-800">
            <h2 class="text-xl font-bold text-white mb-6">Notification Preferences</h2>
            
            <form method="post" action="#">
                {% csrf_token %}
                <div class="space-y-4 mb-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-white font-medium">Email Notifications</h3>
                            <p class="text-gray-400 text-sm">Receive order updates and promotions via email</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="email_notifications" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-food-gold"></div>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-white font-medium">SMS Notifications</h3>
                            <p class="text-gray-400 text-sm">Receive order updates and promotions via SMS</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="sms_notifications" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-food-gold"></div>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-white font-medium">Order Updates</h3>
                            <p class="text-gray-400 text-sm">Receive notifications about your order status</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="order_updates" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-food-gold"></div>
                        </label>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-white font-medium">Promotional Emails</h3>
                            <p class="text-gray-400 text-sm">Receive special offers and promotions</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" name="promotional_emails" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-food-gold"></div>
                        </label>
                    </div>
                </div>
                
                <div class="flex justify-end">
                    <button type="submit" class="btn-primary px-6 py-3 rounded-lg">
                        Save Preferences
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Settings Sidebar -->
    <div class="space-y-6">
        <!-- Quick Links -->
        <div class="card p-6 shadow-lg border border-gray-800">
            <h3 class="text-white font-bold text-lg mb-4">Quick Links</h3>
            
            <div class="space-y-3">
                <a href="{% url 'user_profile' %}" class="flex items-center text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-user w-6 text-center"></i>
                    <span class="ml-3">Edit Profile</span>
                </a>
                <a href="#" class="flex items-center text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-credit-card w-6 text-center"></i>
                    <span class="ml-3">Payment Methods</span>
                </a>
                <a href="#" class="flex items-center text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-map-marker-alt w-6 text-center"></i>
                    <span class="ml-3">Delivery Addresses</span>
                </a>
                <a href="#" class="flex items-center text-gray-300 hover:text-food-gold transition duration-300">
                    <i class="fas fa-history w-6 text-center"></i>
                    <span class="ml-3">Order History</span>
                </a>
            </div>
        </div>
        
        <!-- Account Actions -->
        <div class="card p-6 shadow-lg border border-gray-800">
            <h3 class="text-white font-bold text-lg mb-4">Account Actions</h3>
            
            <div class="space-y-4">
                <button class="w-full flex items-center justify-between bg-gray-800 text-gray-300 px-4 py-3 rounded-lg hover:bg-gray-700 transition duration-300">
                    <span class="flex items-center">
                        <i class="fas fa-download w-6 text-center"></i>
                        <span class="ml-3">Download My Data</span>
                    </span>
                    <i class="fas fa-chevron-right text-xs"></i>
                </button>
                
                <button class="w-full flex items-center justify-between bg-gray-800 text-gray-300 px-4 py-3 rounded-lg hover:bg-gray-700 transition duration-300">
                    <span class="flex items-center">
                        <i class="fas fa-trash w-6 text-center text-red-500"></i>
                        <span class="ml-3">Delete Account</span>
                    </span>
                    <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Password validation
        const newPasswordInput = document.getElementById('new_password');
        const confirmPasswordInput = document.getElementById('confirm_password');
        const form = document.querySelector('form');
        
        form.addEventListener('submit', function(e) {
            if (newPasswordInput.value !== confirmPasswordInput.value) {
                e.preventDefault();
                alert('Passwords do not match');
            }
            
            if (newPasswordInput.value.length < 8) {
                e.preventDefault();
                alert('Password must be at least 8 characters long');
            }
        });
    });
</script>
{% endblock extra_scripts %}
